{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBìƒì¡° | {{wheresk}} ìƒí™œì¸êµ¬ ì •ë³´</title>
    <script src ='https://code.jquery.com/jquery-3.6.0.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-treemap@0.2.3"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/treemap.js"></script>
    <script src="http://code.highcharts.com/modules/heatmap.js"></script>
    <link rel="stylesheet" href="{% static 'css/pop_info.css' %}" type="text/css">
    <link rel="shortcut icon" href="{% static 'img/obíŒŒë¹„ì½˜.ico' %}">
    <script>
        $( document ).ready( function() {
            $( '.sex' ).fadeIn(2000)
            if (mpop > fpop){
              $('.manimg').attr('src','{% static "img/male2.png" %}').stop(true,true).hide().fadeIn(4000)
            } else if (mpop < fpop){
              $('.womanimg').attr('src','{% static "img/female2.png" %}').stop(true,true).hide().fadeIn(4000)
            } else {
              $('.manimg').attr('src','{% static "img/male2.png" %}').stop(true,true).hide().fadeIn(4000)
              $('.womanimg').attr('src','{% static "img/female2.png" %}').stop(true,true).hide().fadeIn(4000)
            }
        })
        
    </script>
</head>
<body>
    <header>
      <div class="head1">
        <h1>{{wheregu}} {{ wheresk }}ì˜ ì •ë³´</h1>
      </div>
      <div class="head2">
        <a class="home" href="/">
          <img src="{% static 'img/ì§‘2.png' %}" width = '70px' height="70px" style="display: inline;">
        </a>
      </div>
    </header>
    <main>
      <div class="lf">
          <div class="left">
              <div class="popul">
                  <div>
                      <div class="my-4" id="myChart1" style='width:100%; height: 100%;'></div>
                  </div>
              </div>
              <div class="sex">
                <div class="sex_title">ğŸš¹ì„±ë³„ì— ë”°ë¥¸ ìƒí™œ ì¸êµ¬ğŸšº</div>
                <div class="sex_content">
                    <!-- <canvas class="my-4" id="myChart2" width="900" height="380"></canvas> -->
                    <div class="male">
                      <div class="m_left">
                        <span class="man_title"><strong>ë‚¨ì„±</strong></span>
                        <span><b>1ë…„ ìƒí™œì¸êµ¬ ìˆ˜</b></span>
                        <span>{{mpop}} ëª…</span>
                        <span><b>ë¹„ìœ¨</b></span>
                        <span>{{m}}%</span>
                        
                      </div>
                      <div class="m_right">
                        <img class='manimg' src="{% static 'img/male1.png' %}" width="100%" height="100%">
                      </div>
                    </div>
                    <div class="female">
                      <div class="f_left">
                        <img class='womanimg'src="{% static 'img/female1.png' %}" width="100%" height="100%">
                      </div>
                      <div class="f_right">
                        <span class="woman_title"><strong>ì—¬ì„±</strong></span>
                        <span><b>1ë…„ ìƒí™œì¸êµ¬ ìˆ˜</b></span>
                        <span>{{fpop}} ëª…</span>
                        <span><b>ë¹„ìœ¨</b></span>
                        <span>{{f}}%</span>
                      </div>
                    </div>
                </div>
              </div>
          </div>
          <div class="right">
              <div class="day">
                <div>ìš”ì¼ ë³„ ìƒí™œì¸êµ¬ ìˆ˜ğŸ“†</div>
                <div>
                  <canvas class="my-4" id="myChart3" style="height:23vh; width:59vw" ></canvas>
                </div>
              </div>
              <div class="age">
                <div>ë‚˜ì´ ë³„ ìƒí™œì¸êµ¬ ìˆ˜ğŸ–</div>
                <div>
                  <canvas class="my-4" id="myChart4" style="height:23vh; width:59vw" ></canvas>
                </div>
              </div>
              <div class="time">
                <div>ì‹œê°„ëŒ€ ë³„ ìƒí™œì¸êµ¬ ìˆ˜â°</div>
                <div>
                  <canvas class="my-4" id="myChart5" style="height:23vh; width:59vw" ></canvas>
                </div>
              </div>
          </div>
      </div>
    </main>
    <footer>
      <span>
        <b>
        Copyright â“’ 2022. OBìƒì¡° All rights reserved  
        </b>
      </span>
      <span>
        <b>Designed by ê¹€í™”ì‹  ì´ì„±ê¸¸ ì´ì¢…í˜¸ ì „ë™ì¤€ ì¡°ì™„ì œ </b>
      </span>
      <span>
        <b>
          Project Source : <a href="https://github.com/GoodJeon/MPJ_team6">https://github.com/GoodJeon/MPJ_team6</a>
        </b> 
      </span>
      
    </footer>

  

    <!--ì°¨íŠ¸ë¶€ë¶„-->
    <script>
        // ì°¨íŠ¸ì— ë“¤ì–´ê°ˆ ë³€ìˆ˜ë“¤ ë‹¤ë“¬ëŠ” ê³³
        var ingu = ('{{ ingu | join:',' }}').split(',')
        var m = parseInt('{{ m }}')
        var f = parseInt('{{ f }}')
        var mpop= parseInt('{{mpop}}')
        var fpop= parseInt('{{fpop}}')
        var mon = ('{{ mon | join:',' }}').split(',')
        var tue = ('{{ tue | join:',' }}').split(',')
        var wed = ('{{ wed | join:',' }}').split(',')
        var thu = ('{{ thu | join:',' }}').split(',')
        var fri = ('{{ fri | join:',' }}').split(',')
        var sat = ('{{ sat | join:',' }}').split(',')
        var sun = ('{{ sun | join:',' }}').split(',')
        var age10 = ('{{ age10 | join:',' }}').split(',')
        var age20 = ('{{ age20 | join:',' }}').split(',')
        var age30 = ('{{ age30 | join:',' }}').split(',')
        var age40 = ('{{ age40 | join:',' }}').split(',')
        var age50 = ('{{ age50 | join:',' }}').split(',')
        var age60 = ('{{ age60 | join:',' }}').split(',')
        var t1 = ('{{ t1 | join:',' }}').split(',')
        var t2 = ('{{ t2 | join:',' }}').split(',')
        var t3 = ('{{ t3 | join:',' }}').split(',')
        var t4 = ('{{ t4 | join:',' }}').split(',')
        var t5 = ('{{ t5 | join:',' }}').split(',')
        var t6 = ('{{ t6 | join:',' }}').split(',')
        var sknames = ('{{ sknames | join:',' }}').split(',')
        var skvalues = ('{{ skvalues | join:',' }}').split(',')
        var treemapData = []
        for(var i=0; i<sknames.length; i++) {
            var dict = {
            name: sknames[i],
            value: parseInt(skvalues[i]),
            colorValue: parseInt(skvalues[i])}
            treemapData.push(dict)
        }

        // ì°¨íŠ¸ ê·¸ë¦¬ëŠ” ê³³
        // ì²« ë²ˆì§¸ ì°¨íŠ¸
        // var ctx1 = document.getElementById("myChart1");
        // var myChart = new Chart(ctx1, {
        //   type: 'doughnut',
        //   data: {
        //     labels: ["2020ë…„ 4ë¶„ê¸°","2021ë…„ 1ë¶„ê¸°","2021ë…„ 2ë¶„ê¸°","2021ë…„ 3ë¶„ê¸°"],
        //     datasets: [{
        //       label: 'ë¶„ê¸° ë³„ ì¸êµ¬ ìˆ˜',
        //       data: [ingu[3], ingu[0], ingu[1], ingu[2]],
        //       backgroundColor: [
        //         'rgba(255, 99, 132, 0.2)',
        //         'rgba(255, 205, 86, 0.2)',
        //         'rgba(75, 192, 192, 0.2)',
        //         'rgba(54, 162, 235, 0.2)'
        //       ],
        //       hoverOffset: 4
        //     }]
        //   }
        // })
         // ì²«ë²ˆì§¸ ì°¨íŠ¸
        $(document).ready(function() {    
            Highcharts.chart('myChart1', {
                chart: {
                    backgroundColor: '#f5f5f5',
                    height: 240
                },
                colorAxis: {
                    minColor: '#FFFFFF',
                    maxColor: Highcharts.getOptions().colors[3]
                },
                series: [{
                    type: 'treemap',
                    layoutAlgorithm: 'squarified',
                    data: treemapData
                }],
                title: {
                    text: 'í–‰ì •êµ¬ ë‚´ ìƒê¶Œë³„ ì—° í‰ê·  ìƒí™œì¸êµ¬ìˆ˜'
                }
            })
        })
        
        // ë‘ ë²ˆì§¸ ì°¨íŠ¸
        // var ctx2 = document.getElementById("myChart2");
        // var myChart = new Chart(ctx2, {
        //   type: 'pie',
        //   data: {
        //     labels: ["ë‚¨ì„± ë¹„ìœ¨", "ì—¬ì„± ë¹„ìœ¨"],
        //     datasets: [{
        //       label: 'ìƒí™œì¸êµ¬ ì„±ë³„ ë¹„ìœ¨(%)',
        //       data: [m, f],
        //       backgroundColor: [
        //         'rgba(54, 162, 235, 1)',
        //         'rgba(255, 99, 132, 1)'
        //       ],
        //     }]
        //   },
        // })
        
        // ì„¸ ë²ˆì§¸ ì°¨íŠ¸
        var ctx3 = document.getElementById("myChart3");
        var myChart = new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: ["ì›”", "í™”","ìˆ˜","ëª©","ê¸ˆ","í† ","ì¼"],
                datasets: [{
                    label: '2020ë…„ 4ë¶„ê¸°',
                    data: [mon[3], tue[3],wed[3],thu[3],fri[3],sat[3],sun[3]],
                    backgroundColor: [
                        'rgba(255, 0, 255, 0.5)',
                        'rgba(255, 0, 255, 0.5)',
                        'rgba(255, 0, 255, 0.5)',
                        'rgba(255, 0, 255, 0.5)',
                        'rgba(255, 0, 255, 0.5)',
                        'rgba(255, 0, 255, 0.5)',
                        'rgba(255, 0, 255, 0.5)'

                    ],
                }, {
                    label: '2021ë…„ 1ë¶„ê¸°',
                    data: [mon[0], tue[0],wed[0],thu[0],fri[0],sat[0],sun[0]],
                    backgroundColor: [
                        'rgba(200, 0, 255, 0.5)',
                        'rgba(200, 0, 255, 0.5)',
                        'rgba(200, 0, 255, 0.5)',
                        'rgba(200, 0, 255, 0.5)',
                        'rgba(200, 0, 255, 0.5)',
                        'rgba(200, 0, 255, 0.5)',
                        'rgba(200, 0, 255, 0.5)'
                    ],
                }, {
                    label: '2021ë…„ 2ë¶„ê¸°',
                    data: [mon[1], tue[1],wed[1],thu[1],fri[1],sat[1],sun[1]],
                    backgroundColor: [
                        'rgba(100, 0, 255, 0.5)',
                        'rgba(100, 0, 255, 0.5)',
                        'rgba(100, 0, 255, 0.5)',
                        'rgba(100, 0, 255, 0.5)',
                        'rgba(100, 0, 255, 0.5)',
                        'rgba(100, 0, 255, 0.5)',
                        'rgba(100, 0, 255, 0.5)'
                        
                    ],
                }, {
                    label: '2021ë…„ 3ë¶„ê¸°',
                    data: [mon[2], tue[2],wed[2],thu[2],fri[2],sat[2],sun[2]],
                    backgroundColor: [
                        'rgba(0, 0, 255, 0.5)',
                        'rgba(0, 0, 255, 0.5)',
                        'rgba(0, 0, 255, 0.5)',
                        'rgba(0, 0, 255, 0.5)',
                        'rgba(0, 0, 255, 0.5)',
                        'rgba(0, 0, 255, 0.5)',
                        'rgba(0, 0, 255, 0.5)'

                    ],
                }]
            },
            options: {
            responsive: false}
        })
        
        // ë„¤ ë²ˆì§¸ ì°¨íŠ¸
        var ctx4 = document.getElementById("myChart4");
        var myChart = new Chart(ctx4, {
          type: 'bar',
          data: {
            labels: ["10ëŒ€", "20ëŒ€","30ëŒ€","40ëŒ€","50ëŒ€","60ëŒ€ì´ìƒ"],
            datasets: [{
              label: '2020ë…„ 4ë¶„ê¸°',
              data: [age10[3],age20[3],age30[3],age40[3],age50[3],age60[3]],
              backgroundColor: [
                'rgba(255, 0, 0, 0.5)',
                'rgba(255, 0, 0, 0.5)',
                'rgba(255, 0, 0, 0.5)',
                'rgba(255, 0, 0, 0.5)',
                'rgba(255, 0, 0, 0.5)',
                'rgba(255, 0, 0, 0.5)',

              ],
            }, {
              label: '2021ë…„ 1ë¶„ê¸°',
              data: [age10[0],age20[0],age30[0],age40[0],age50[0],age60[0]],
              backgroundColor: [
                'rgba(200, 0, 0, 0.5)',
                'rgba(200, 0, 0, 0.5)',
                'rgba(200, 0, 0, 0.5)',
                'rgba(200, 0, 0, 0.5)',
                'rgba(200, 0, 0, 0.5)',
                'rgba(200, 0, 0, 0.5)'
              ],
            }, {
              label: '2021ë…„ 2ë¶„ê¸°',
              data: [age10[1],age20[1],age30[1],age40[1],age50[1],age60[1]],
              backgroundColor: [
                'rgba(150, 0, 0, 0.5)',
                'rgba(150, 0, 0, 0.5)',
                'rgba(150, 0, 0, 0.5)',
                'rgba(150, 0, 0, 0.5)',
                'rgba(150, 0, 0, 0.5)',
                'rgba(150, 0, 0, 0.5)'
              ],
            }, {
              label: '2021ë…„ 3ë¶„ê¸°',
              data: [age10[2],age20[2],age30[2],age40[2],age50[2],age60[2]],
              backgroundColor: [
                'rgba(100, 0, 0, 0.5)',
                'rgba(100, 0, 0, 0.5)',
                'rgba(100, 0, 0, 0.5)',
                'rgba(100, 0, 0, 0.5)',
                'rgba(100, 0, 0, 0.5)',
                'rgba(100, 0, 0, 0.5)'
              ],
            }]
          },
          options: {
            responsive: false}
        })

        // ë‹¤ì„¯ ë²ˆì§¸ ì°¨íŠ¸
        var ctx5 = document.getElementById("myChart5");
        var myChart = new Chart(ctx5, {
          type: 'bar',
          data: {
            labels: ["0ì‹œ~6ì‹œ", "6ì‹œ~11ì‹œ","11ì‹œ~14ì‹œ","14ì‹œ~17ì‹œ","17ì‹œ~21ì‹œ","21ì‹œ~24ì‹œ"],
            datasets: [{
              label: '2020ë…„ 4ë¶„ê¸°',
              data: [t1[3], t2[3], t3[3], t4[3], t5[3], t6[3]],
              backgroundColor: [
                'rgba(0, 255, 0, 0.5)',
                'rgba(0, 255, 0, 0.5)',
                'rgba(0, 255, 0, 0.5)',
                'rgba(0, 255, 0, 0.5)',
                'rgba(0, 255, 0, 0.5)',
                'rgba(0, 255, 0, 0.5)',
              ],
            }, {
              label: '2021ë…„ 1ë¶„ê¸°',
              data: [t1[0], t2[0], t3[0], t4[0], t5[0], t6[0]],
              backgroundColor: [
                'rgba(0, 200, 0, 0.5)',
                'rgba(0, 200, 0, 0.5)',
                'rgba(0, 200, 0, 0.5)',
                'rgba(0, 200, 0, 0.5)',
                'rgba(0, 200, 0, 0.5)',
                'rgba(0, 200, 0, 0.5)',
              ],
            }, {
              label: '2021ë…„ 2ë¶„ê¸°',
              data: [t1[1], t2[1], t3[1], t4[1], t5[1], t6[1]],
              backgroundColor: [
                'rgba(0, 150, 0, 0.5)',
                'rgba(0, 150, 0, 0.5)',
                'rgba(0, 150, 0, 0.5)',
                'rgba(0, 150, 0, 0.5)',
                'rgba(0, 150, 0, 0.5)',
                'rgba(0, 150, 0, 0.5)',
              ],
            }, {
              label: '2021ë…„ 3ë¶„ê¸°',
              data: [t1[2], t2[2], t3[2], t4[2], t5[2], t6[2]],
              backgroundColor: [
                'rgba(0, 100, 0, 0.5)',
                'rgba(0, 100, 0, 0.5)',
                'rgba(0, 100, 0, 0.5)',
                'rgba(0, 100, 0, 0.5)',
                'rgba(0, 100, 0, 0.5)',
                'rgba(0, 100, 0, 0.5)',
              ],
            }]
          },
          options: {
            responsive: false}
        })

      </script>
</body>
</html>